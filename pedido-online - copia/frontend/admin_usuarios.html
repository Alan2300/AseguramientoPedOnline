<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Gestión de Usuarios</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/frontend/css/homeHeader.css" />
  <style>
    body { margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:#f4f6fb; color:#111827 }
    header.hero { background:#0d6efd; color:#fff; padding:36px 16px; text-align:center }
    header.hero h1 { margin:0; font-size:34px; font-weight:800 }
    header.hero .welcome { margin-top:8px; opacity:.9 }

    .wrap { max-width:1200px; margin:22px auto; padding:0 16px }
    .toolbar { display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin-bottom:14px }
    .btn { border:0; border-radius:10px; padding:10px 14px; font-weight:700; cursor:pointer }
    .btn.back { background:#0f172a; color:#fff }
    .btn.logout { background:#ef4444; color:#fff }
    .btn.primary { background:#0d6efd; color:#fff }
    .btn.success { background:#10b981; color:#fff }
    .btn.warn { background:#f59e0b; color:#fff }
    .btn.danger { background:#ef4444; color:#fff }
    .spacer { flex:1 }

    .searchbar { display:flex; gap:8px; align-items:center }
    .searchbar input, .searchbar select { border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px; background:#fff }
    .searchbar input { width:320px }

    .card { background:#fff; border-radius:14px; box-shadow:0 10px 28px rgba(0,0,0,.08); overflow:hidden }
    .card h2 { margin:0; padding:16px 18px; background:#0d6efd; color:#fff; font-size:18px }
    .table-wrap { overflow:auto }
    table { width:100%; border-collapse:collapse }
    thead th { background:#0d6efd; color:#fff; text-align:left; font-size:14px; letter-spacing:.2px; padding:12px }
    tbody td { padding:12px; border-bottom:1px solid #eef2f7; vertical-align:middle; font-size:14px }
    tbody tr:hover { background:#fafbff }
    .muted { color:#6b7280; font-size:13px; padding:14px }

    dialog::backdrop { background:rgba(0,0,0,.35) }
    dialog { border:0; border-radius:14px; width:min(520px, 92vw); padding:0; overflow:hidden; box-shadow:0 12px 36px rgba(0,0,0,.25); }
    .dlg-h { background:#0d6efd; color:#fff; padding:14px 18px; font-weight:800 }
    .dlg-b { padding:18px; display:grid; gap:10px }
    .dlg-f { padding:14px 18px; display:flex; gap:10px; justify-content:flex-end; background:#f9fafb; }
    .row { display:grid; gap:6px }
    .row label { font-size:13px; color:#374151 }
    .row input, .row select { border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px; background:#fff }
  </style>
</head>
<body>
  <script src="/frontend/js/session.js"></script>
  <div id="app-header"></div>

  <header class="hero">
    <h1>Gestión de Usuarios</h1>
    <div class="welcome">Administrador</div>
  </header>

  <div class="wrap">
    <div class="toolbar">
      <button class="btn back" id="btnHome">← Inicio</button>
      <div class="searchbar">
        <input id="q" type="search" placeholder="Buscar por nombre o correo…" />
        <select id="role">
          <option value="">Todos los roles</option>
          <option value="1">Administrador</option>
          <option value="2">Cliente</option>
        </select>
        <button class="btn primary" id="btnSearch">Buscar</button>
      </div>
      <div class="spacer"></div>
      <button class="btn success" id="btnAdd">+ Registrar Usuario</button>
      <button class="btn logout" id="btnLogout">Cerrar Sesión</button>
    </div>

    <div class="card">
      <h2>Lista de Usuarios</h2>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Correo</th>
              <th>Rol</th>
              <th style="width:210px">Acciones</th>
            </tr>
          </thead>
          <tbody id="tbodyUsers">
            <tr><td colspan="4" class="muted">Cargando…</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <dialog id="dlgUser">
    <div class="dlg-h" id="dlgTitle">Nuevo usuario</div>
    <form class="dlg-b" id="frmUser" method="dialog">
      <input type="hidden" id="userId" />
      <div class="row">
        <label for="nombre">Nombre</label>
        <input id="nombre" type="text" required />
      </div>
      <div class="row">
        <label for="email">Correo</label>
        <input id="email" type="email" required />
      </div>
      <div class="row">
        <label for="password">Contraseña <span class="muted">(deja vacío para no cambiarla al editar)</span></label>
        <input id="password" type="password" />
      </div>
      <div class="row">
        <label for="rol">Rol</label>
        <select id="rol" required>
          <option value="1">Administrador</option>
          <option value="2">Cliente</option>
        </select>
      </div>
      <div id="err" class="muted" style="color:#ef4444"></div>
    </form>
    <div class="dlg-f">
      <button class="btn" id="btnCancel">Cancelar</button>
      <button class="btn primary" id="btnSave">Guardar</button>
    </div>
  </dialog>

  <script src="/frontend/js/admin_usuarios.js"></script>
</body>
</html>
